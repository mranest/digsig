<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
		"http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<title>Applet sample</title>
		<script type="text/javascript" src="../../main/javascript/dsapplet.js"> </script>
		<script type="text/javascript">
		function signForm(form) {
			// var certificates = document.getElementById('certificates');
			// var alias = certificates.options[certificates.selectedIndex].value;
			return dsapplet.signForm('form1', null);
		}
		function signPlaintext(plaintext) {
			return dsapplet.signPlaintext(plaintext, null);
		}
		function onNoCertificates() {
			alert("No certificates were found; I would be resubmitting right now");
		}
		function populatesCertificates() {
			var aliasedDescriptions = eval(dsapplet.getAliasedDescriptions());
			var certificates = document.getElementById('certificates');
			
			certificates.options.length = 0;
			for (i=0; i<aliasedDescriptions.length; i++) {
				var aliasedDescription = aliasedDescriptions[i];
				certificates.options[i] = new Option(aliasedDescription.description, aliasedDescription.alias);
			}
		}
		</script>
	</head>
	<body>
  		<h1>
  		Sample Form w/ Digital Signature:</h1>
  		<form id="form1" name="form1" method="get" onsubmit="return signForm('form1');">
			<table>
				<tr>
					<td align="right">Account: </td>
					<td>
						<select name="account">
							<option value="1234567890">Savings: 1234567890</option>
							<option value="0987654321">Checked: 0987654321</option>
						</select>
					</td>
				</tr>
				<tr>
					<td align="right">Amount: </td>
					<td>
						<input type="text" name="amount" />
					</td>
				</tr>
				<tr>
					<td align="right">File: </td>
					<td>
						<input type="file" name="file" />
					</td>
				</tr>
				<tr>
					<td align="right">Checkboxes: </td>
					<td>
						<input type="checkbox" name="check" value="1" />
						<input type="checkbox" name="check" value="2" checked="true" />
						<input type="checkbox" name="check" value="3" checked="true" />
					</td>
				</tr>
				<tr>
					<td align="right">Signature (should be hidden): </td>
					<td><textarea name="signature" rows=25" cols="80"></textarea></td>
				</tr>
				<tr>
					<td align="right">Certificates: </td>
					<td>
						<select id="certificates" name="certificates">
						</select>
					</td>
				</tr>
				<tr>
					<td></td>
					<td>
						<script>
							var dsapplet = new DSApplet('../../../target/dsig-applet-complete.jar');
							dsapplet.setFormId('');
							dsapplet.setSignatureElement('signature');
							dsapplet.setNonce('test_nonce');
						</script>
						<input name="popu" type="button" onclick="populatesCertificates();" value="Populate"/>
						<input name="sign" type="button" onclick="if (signForm()) { this.disabled = true; }" value="Sign"/>
						<input name="psgn" type="button" onclick="alert(signPlaintext('arnaki aspro kai paxu'))" value="Plaintext Sign"/>
						<input name="subm" type="submit" value="Submit" />
						<script>
							dsapplet.printAppletDeclaration(16, 16);
						</script>
						<!--script>printAppletDeclaration(16, 16);</script-->
						<!--script src="http://java.com/js/deployJava.js"></script>
						<script>
							var attributes = {code:'gr.ageorgiadis.signature.DSApplet.class',
											  archive:'../../target/dsig-applet-complete.jar',
											  width:16, height:16};
							var parameters = {signatureAlgorithm:'SHA1withRSA',
											  flags:'!unselectedRadioIncluded',
											  plaintextElement:'plaintext',
											  serialNumberElement:'serialNumber',
											  signatureElement:'signature',
											  mayscript:'mayscript'};
							var version = '1.6.0';
							deployJava.runApplet(attributes, parameters, version);
						</script-->
				</tr>
			</table>
		</form>
  	</body>
</html>